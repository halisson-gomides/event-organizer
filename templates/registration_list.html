{% extends "base.html" %}
{% block title %}Solicita√ß√µes de Registro{% endblock %}
{% block content %}

<div class="action-bar">
  <h2>üìã Solicita√ß√µes de Registro</h2>
</div>

<div id="content">
{% if requests %}
  <div class="list-grid">
    {% for req in requests %}
      <div class="list-card">
        
        <div class="list-info">
          <h3>{{ req.username }}</h3>

          <div class="list-type {{ req.status }}">
            {% if req.status == 'pending' %}
              ‚è≥ PENDENTE
            {% elif req.status == 'approved' %}
              ‚úÖ APROVADO
            {% elif req.status == 'rejected' %}
              ‚ùå REJEITADO
            {% endif %}
          </div>
          
          <div class="list-details">
            <div><strong>Email:</strong> {{ req.email }}</div>
            <div><strong>Perfil:</strong> 
              {% if req.profile == 'admin' %}
                Administrador
              {% elif req.profile == 'organizer' %}
                Organizador
              {% elif req.profile == 'volunteer' %}
                Volunt√°rio
              {% else %}
                N√£o especificado
              {% endif %}
            </div>
            <div><strong>Solicitado em:</strong> {{ req.requested_at|to_local_time }}</div>
            
            {% if req.reviewed_at %}
              <div><strong>Revisado em:</strong> {{ req.reviewed_at|to_local_time }}</div>
            {% endif %}
            
            {% if req.rejection_reason %}
              <div><strong>‚ùó Motivo:</strong> {{ req.rejection_reason }}</div>
            {% endif %}
          </div>
        </div>
        
        <div class="list-actions">
          {% if req.status == 'pending' %}
            <button class="btn-small"
                    hx-get="/registrations/{{ req.id }}"
                    hx-target="body"
                    hx-swap="innerHTML">
              ‚úèÔ∏è Revisar
            </button>
          {% else %}
            <button class="btn-small"
                    hx-get="/registrations/{{ req.id }}"
                    hx-target="body"
                    hx-swap="innerHTML">
              Ver Detalhes
            </button>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <div class="empty-state">
    <h3>üì≠ Nenhuma solicita√ß√£o de registro</h3>
    <p>N√£o h√° solicita√ß√µes de registro no momento.</p>
  </div>
{% endif %}
</div>
{% endblock %}